{% extends "admin/base_site_frontend.html" %}
{% load i18n admin_static %}
{% block extrastyle %}{{ block.super }}<link rel="stylesheet" type="text/css" href="{% static "admin/css/dashboard.css" %}" />{% endblock %}
{% block coltype %}colMS{% endblock %}
{% block bodyclass %}{{ block.super }} dashboard{% endblock %}
{# {% block breadcrumbs %}{% endblock %} #}
{% block extradomready %}
$('form').submit(function() { // catch the form's submit event
    $.ajax({ // create an AJAX call...
        data: $(this).serialize(), // get the form data
        type: $(this).attr('method'), // GET or POST
        url: $(this).attr('action'), // the file to call
        success: function(response) { // on success..
        	rsp=JSON.stringify(response);
        	alert(rsp);
        	$("pre").remove()
			$("#"+$(this)[0].url.replace("/","") ).prepend("<pre>"+rsp+"</pre>");
        },
		error: function(jqXHR,error, errorThrown) {  
		     if(jqXHR.status&&jqXHR.status==500){
		          alert(jqXHR.responseText); 
		     }else{
		         alert("Something went wrong, its not even 500!! ");
		     }
		}
    });
    return false; // cancel original event to prevent form submitting
});
{% endblock %}

{% block content %}

{% for pat_name,pattern in patterns.iteritems %}





<h4>/api/{{pat_name}}/ ( {{pattern.type}})<h4/>



  <form role="form"  method="{{pattern.type}}" id='{{pat_name}}' class="form-horizontal" role="form" action="{{pat_name}}/">


{% for param in pattern.params %}

    <div class="form-group">
      <label class="control-label col-sm-2" for="{{param}}">{{param}}:</label>
      <div class="col-sm-10">
        <input type="email" class="form-control" name="{{param}}" placeholder="{{param}}">
      </div>
    </div>

{% endfor %}


{% if pattern.params %}
    <div class="form-group">        
      <div class="col-sm-offset-2 col-sm-10">
        <button type="submit" class="btn btn-default">Submit</button>
      </div>
    </div>
{% endif %}


</form>
<hr/>
{% endfor %}






{% endblock %}