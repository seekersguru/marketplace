{% extends "admin/base_site_frontend.html" %}
{% load i18n admin_static %}
{% block extrastyle %}{{ block.super }}<link rel="stylesheet" type="text/css" href="{% static "admin/css/dashboard.css" %}" />{% endblock %}
{% block coltype %}colMS{% endblock %}
{% block bodyclass %}{{ block.super }} dashboard{% endblock %}
{# {% block breadcrumbs %}{% endblock %} #}
{% block extradomready %}
$('form').submit(function() { // catch the form's submit event
    $.ajax({ // create an AJAX call...
        data: $(this).serialize(), // get the form data
        type: $(this).attr('method'), // GET or POST
        url: $(this).attr('action'), // the file to call
        success: function(response) { // on success..
        	rsp=JSON.stringify(response,null,4);
        	$("pre").remove()
        	if (response["result"]=="error"){
        		stl="style='color:red;'"
        	}else{
        		stl="style='color:green;'"
        	}
			$("#"+$(this)[0].url.replace("/","") ).prepend("<pre "+stl +">"+rsp+"</pre>");
        },
		error: function(jqXHR,error, errorThrown) {  
		     if(jqXHR.status&&jqXHR.status==500){
		          $("#"+$(this)[0].url.replace("/","") ).prepend("<pre style='color:red'>"+jqXHR.responseText+"</pre>");
		     }else{
		         alert("Something went wrong, its not even 500!! ");
		     }
		}
    });
    return false; // cancel original event to prevent form submitting
});
{% endblock %}

{% block content %}

{% for pat_name,pattern in patterns.iteritems %}


<form role="form"  method="{{pattern.type}}" id='{{pat_name}}' class="form-horizontal" role="form" action="{{pat_name}}/">
    <div class="form-group"> 
    <h4>/{{pat_name}}/ ( {{pattern.type}})<h4/>  
    {% if pattern.params %}     
      <div class="col-sm-offset-2 col-sm-10">
        <button type="submit" class="btn btn-default">Submit</button>
      </div>
	{% endif %}
    </div>


{% for param in pattern.params %}

    <div class="form-group">
      <label class="control-label col-sm-2" for="{{param}}">{{param}}:</label>
      <div class="col-sm-10">
        <input  class="form-control" name="{{param}}" placeholder="{{param}}">
      </div>
    </div>

{% endfor %}

</form>
<hr/>
<div class='main-header'></div>
{% endfor %}






{% endblock %}